<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main/utils/wslTest.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main/utils/wslTest.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// WSL and CTrace testing utility
const { spawn } = require('child_process');
const os = require('os');

/**
 * Test WSL availability and CTrace execution
 */
async function testWSLAndCTrace() {
  console.log('ðŸ§ª Testing WSL and CTrace Setup');
  console.log('================================');
  
  const platform = os.platform();
  console.log(`Platform: ${platform}`);
  
  if (platform !== 'win32') {
    console.log('âœ… Not on Windows, WSL test not needed');
    return true;
  }
  
  // Test 1: WSL availability
  console.log('\n1. Testing WSL availability...');
  const wslAvailable = await testWSL();
  
  if (!wslAvailable) {
    console.log('âŒ WSL is not available');
    return false;
  }
  
  console.log('âœ… WSL is available');
  
  // Test 2: CTrace binary accessibility via WSL
  console.log('\n2. Testing CTrace binary via WSL...');
  const ctraceAvailable = await testCTraceViaWSL();
  
  if (!ctraceAvailable) {
    console.log('âŒ CTrace binary is not accessible via WSL');
    return false;
  }
  
  console.log('âœ… CTrace binary is accessible via WSL');
  
  // Test 3: WSL path conversion
  console.log('\n3. Testing WSL path conversion...');
  testPathConversion();
  
  console.log('\nðŸŽ‰ All tests passed! WSL and CTrace are properly configured.');
  return true;
}

function testWSL() {
  return new Promise((resolve) => {
    const child = spawn('wsl', ['--status'], { stdio: 'pipe' });
    
    child.on('error', (err) => {
      console.log(`WSL test error: ${err.message}`);
      resolve(false);
    });
    
    child.on('close', (code) => {
      console.log(`WSL status exit code: ${code}`);
      resolve(code === 0);
    });
    
    setTimeout(() => {
      child.kill();
      resolve(false);
    }, 5000);
  });
}

function testCTraceViaWSL() {
  return new Promise((resolve) => {
    // Test with a simple --help command
    const child = spawn('wsl', ['/mnt/c/Users/shookapic/Electron-Test/bin/ctrace', '--help'], { 
      stdio: 'pipe' 
    });
    
    let stdout = '';
    let stderr = '';
    
    child.stdout.on('data', (data) => {
      stdout += data.toString();
    });
    
    child.stderr.on('data', (data) => {
      stderr += data.toString();
    });
    
    child.on('error', (err) => {
      console.log(`CTrace test error: ${err.message}`);
      resolve(false);
    });
    
    child.on('close', (code) => {
      console.log(`CTrace --help exit code: ${code}`);
      if (stdout) console.log(`Stdout: ${stdout.substring(0, 200)}...`);
      if (stderr) console.log(`Stderr: ${stderr.substring(0, 200)}...`);
      
      // Even if exit code is not 0, if we got output, the binary is accessible
      resolve(code === 0 || stdout.length > 0 || stderr.length > 0);
    });
    
    setTimeout(() => {
      child.kill();
      resolve(false);
    }, 10000);
  });
}

function testPathConversion() {
  const testPaths = [
    'C:\\Users\\test\\file.c',
    'C:\\Program Files\\test\\file.cpp',
    'D:\\Projects\\test\\main.c'
  ];
  
  console.log('Testing Windows to WSL path conversion:');
  testPaths.forEach(winPath => {
    const wslPath = winPath.replace(/([A-Z]):\\/g, (match, drive) => `/mnt/${drive.toLowerCase()}/`).replace(/\\/g, '/');
    console.log(`  ${winPath} â†’ ${wslPath}`);
  });
}

// Export for use in development
module.exports = { testWSLAndCTrace };

// Auto-run when called directly
if (require.main === module) {
  testWSLAndCTrace().catch(console.error);
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AnthropicProvider.html">AnthropicProvider</a></li><li><a href="BaseProvider.html">BaseProvider</a></li><li><a href="DeepseekProvider.html">DeepseekProvider</a></li><li><a href="FileOperationsManager.html">FileOperationsManager</a></li><li><a href="FileOperationsManager.FileOperationsManager.html">FileOperationsManager</a></li><li><a href="GenericOpenAIProvider.html">GenericOpenAIProvider</a></li><li><a href="GroqProvider.html">GroqProvider</a></li><li><a href="NotificationManager.html">NotificationManager</a></li><li><a href="OpenAIProvider.html">OpenAIProvider</a></li><li><a href="PerplexityProvider.html">PerplexityProvider</a></li><li><a href="ProviderRegistry.html">ProviderRegistry</a></li><li><a href="SearchManager.html">SearchManager</a></li><li><a href="TabManager.html">TabManager</a></li><li><a href="TabManager.TabManager.html">TabManager</a></li><li><a href="UIController.html">UIController</a></li><li><a href="UIController.UIController.html">UIController</a></li><li><a href="VisualyzerManager.html">VisualyzerManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#applySyntaxHighlight">applySyntaxHighlight</a></li><li><a href="global.html#buildFileTree">buildFileTree</a></li><li><a href="global.html#checkWSLAvailability">checkWSLAvailability</a></li><li><a href="global.html#createVisualizerWindow">createVisualizerWindow</a></li><li><a href="global.html#createWindow">createWindow</a></li><li><a href="global.html#detectFileEncoding">detectFileEncoding</a></li><li><a href="global.html#detectFileType">detectFileType</a></li><li><a href="global.html#detectWSL">detectWSL</a></li><li><a href="global.html#detectWSLStatus">detectWSLStatus</a></li><li><a href="global.html#escapeHtml">escapeHtml</a></li><li><a href="global.html#formatFileSize">formatFileSize</a></li><li><a href="global.html#getFileIcon">getFileIcon</a></li><li><a href="global.html#getLanguageConfig">getLanguageConfig</a></li><li><a href="global.html#handleLocalChat">handleLocalChat</a></li><li><a href="global.html#handleModularProvider">handleModularProvider</a></li><li><a href="global.html#handleOllamaChat">handleOllamaChat</a></li><li><a href="global.html#highlightCppSyntax">highlightCppSyntax</a></li><li><a href="global.html#installWSLAutomatically">installWSLAutomatically</a></li><li><a href="global.html#installWSLDistribution">installWSLDistribution</a></li><li><a href="global.html#isValidUTF8">isValidUTF8</a></li><li><a href="global.html#searchInDirectory">searchInDirectory</a></li><li><a href="global.html#setupAssistantHandlers">setupAssistantHandlers</a></li><li><a href="global.html#setupCtraceHandlers">setupCtraceHandlers</a></li><li><a href="global.html#setupEditorHandlers">setupEditorHandlers</a></li><li><a href="global.html#setupFileHandlers">setupFileHandlers</a></li><li><a href="global.html#setupWindowControls">setupWindowControls</a></li><li><a href="global.html#shouldHighlight">shouldHighlight</a></li><li><a href="global.html#showDistributionOptions">showDistributionOptions</a></li><li><a href="global.html#showLimitedFunctionalityDialog">showLimitedFunctionalityDialog</a></li><li><a href="global.html#showManualInstallationInstructions">showManualInstallationInstructions</a></li><li><a href="global.html#showWSLSetupDialog">showWSLSetupDialog</a></li><li><a href="global.html#startWatchingWorkspace">startWatchingWorkspace</a></li><li><a href="global.html#stopWatchingWorkspace">stopWatchingWorkspace</a></li><li><a href="global.html#testEmojiSupport">testEmojiSupport</a></li><li><a href="global.html#testWSLAndCTrace">testWSLAndCTrace</a></li><li><a href="global.html#tokenizeCpp">tokenizeCpp</a></li><li><a href="global.html#tokensToHtml">tokensToHtml</a></li><li><a href="global.html#updateFileTypeStatus">updateFileTypeStatus</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Nov 26 2025 15:15:41 GMT+0900 (Korean Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
